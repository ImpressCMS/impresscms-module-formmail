Formmail 1.3 Hacked by Tac Hisaoka
--------------------------------------------

/**
 *
 * 'Form Mail' module     by Tom  ( Malaika System : http://malaika.s31.xrea.com/ )
 *
 **/

Formmailモジュールは、複数のメール送信フォームを作成するモジュールです。
formlaire v1.0 をベースに開発しました。

* formmail v1.1.1 (2005/11/25)
- SQL Injection対策 (THX Marijuana)


http://www.kume.biz/
において画像認証タイプのformmailモジュールが公開されています。

私の知り合いがこのモジュールをインストールした後に
PHP4〜PHP5に切り替えたところ、動作不良になってしまったので
その対策を取ったものです。

対策は、現状のformmailモジュールと
はっぴぃ・りなっくすサイトにて公開されている
Liaise+画像認証で使われていた
captcha_xライブラリを単純にドッキングしました。

とりあえずは、PHP4でもPHP5でも動いております。
また、私の所ではXCLでも動作をしています。

もし、PHP5でformmailが動かないと言う方
これをお試ししてみてはいかがでしょうか。

フォルダ構成



管理者メニューの「SPAM対策」のところで自動で書き換えしますので
また、modules/formmail/config.phpのアクセス権限を666にしてください。

SPAM対策で  ○ 画像認証あり × 無し 
となっています。


---------------------------------------------------------------------
MySQLがバージョン4.0以下と4.1以上のSQL構文形式が異なっています。
4.0以下の場合は
sql/mysql_40.sqlを
sql/mysql.sqlにリネームしてインストールください。

---------------------------------------------------------------------

ver 1.31i : impressCMSのCaptchaクラスがある場合はそちらを利用するように変更